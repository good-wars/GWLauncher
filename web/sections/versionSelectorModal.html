<div id="version-selector-mmodal" class="modal-bg hidden">
  <div class="modal-window bg-primary-1100">
    <div class="flex items-center mb-2">
      <div class="modal-caption grow text-sm text-center">
        Выберите версию игры
      </div>
      <button
        type="button"
        class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
        onclick="FrogUI.goHomeSection()"
      >
        <span class="material-symbols-rounded">close</span>
      </button>
    </div>

    <!-- Search input and refresh button -->
    <div class="flex items-center justify-center mt-3">
      <input
        class="custom-input w-full"
        style="width: 768px"
        type="text"
        placeholder="Поиск"
        id="version-search-input"
      />
      <button
        class="custom-input ml-2 refresh-btn"
        onclick="FrogVersionsUI.refreshVersionsListModal(lastVersionsFilters)"
      >
        <span class="material-symbols-rounded"> refresh </span>
      </button>
    </div>

    <!-- Category select -->
    <ul
      class="text-sm font-medium text-center rounded-lg shadow flex text-gray-400 mt-3 catselector"
      id="version-category-selector"
    >
      <li class="w-full">
        <div class="inline-block w-full p-4 active" data-filter="all">
          <span
            class="material-symbols-rounded text-white"
            style="font-size: 24px"
            >sort</span
          >
          <span class="ml-3 text-white">Все</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="installed">
          <span
            class="material-symbols-rounded text-white"
            style="font-size: 24px"
            >download_for_offline</span
          >
          <span class="ml-3 text-white">Установленные</span>
        </div>
      </li>
    </ul>

    <!-- Modloader select -->
    <ul
      class="text-sm font-medium text-center rounded-lg shadow flex text-gray-400 mt-3 catselector"
      id="version-type-selector"
    >
      <li class="w-full">
        <div class="inline-block w-full p-4 active" data-filter="all">
          <span
            class="material-symbols-rounded text-white"
            style="font-size: 24px"
            >sort</span
          >
          <span class="ml-3 text-white">Все</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="vanilla">
          <img src="assets/ver_icons/vanilla.png" style="height: 24px" />
          <span class="ml-3 text-white">Ванильная</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="forge">
          <img src="assets/ver_icons/forge.png" style="height: 24px" />
          <span class="ml-3 text-white">Forge</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="forgeoptifine">
          <img src="assets/ver_icons/forgeoptifine.png" style="height: 24px" />
          <span class="ml-3 text-white">OptiFine</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="fabric">
          <img src="assets/ver_icons/fabric.png" style="height: 24px" />
          <span class="ml-3 text-white">Fabric</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-filter="fabricsodiumiris">
          <img src="assets/ver_icons/sodium.png" style="height: 24px" />
          <span class="ml-3 text-white">Sodium</span>
        </div>
      </li>
    </ul>

    <!-- Vanilla types -->
    <ul
      class="text-sm font-medium text-center rounded-lg shadow flex text-gray-400 mt-3 catselector"
      id="vanilla-type-selector"
    >
      <li class="w-full">
        <div class="inline-block w-full p-4 active" data-type="release">
          <span class="ml-3 text-white">Релизы</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-type="snapshot">
          <span class="ml-3 text-white">Snapshot</span>
        </div>
      </li>
      <li class="w-full">
        <div class="inline-block w-full p-4" data-type="all">
          <span class="ml-3 text-white">Все</span>
        </div>
      </li>
    </ul>

    <!-- Versions list -->
    <div class="overflow-y-auto mt-3" style="border-radius: 12px; height: 40vh">
      <ul class="versions-list" id="game-versions-list"></ul>
    </div>
    
    <div
      class="loading-overlay flex items-center justify-center w-full"
      style="margin-top: 24px"
    >
      <div
        role="status"
        class="w-full flex flex-col items-center justify-center"
      >
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
        <div
          class="h-2.5 bg-primary-1000 rounded-full"
          style="margin-bottom: 1.3rem"
        ></div>
      </div>
    </div>
  </div>
</div>

<style>
  #version-selector-mmodal .modal-window {
    width: max-content;
    height: max-content;
    max-height: 95%;
  }

  #version-selector-mmodal .modal-caption {
    font-size: 18pt !important;
  }

  #version-selector-mmodal .versions-list {
    display: flex;
    flex-direction: column;
    width: 100%;
    background: var(--bg-primary-1000);
    overflow: hidden;
  }

  #version-selector-mmodal .versions-list .version-item {
    padding: 8px 14px;
    background: var(--bg-primary-1000);
    display: flex;
    align-items: center;
  }

  #version-selector-mmodal .versions-list .version-item.hidden {
    display: none;
  }

  #version-selector-mmodal .versions-list .version-item .gray {
    color: rgb(180, 180, 180);
  }

  #version-selector-mmodal .versions-list .version-item:hover {
    background: var(--bg-primary-900);
  }

  #version-selector-mmodal .refresh-btn {
    padding: 0 !important;
    width: 48px;
    height: 48px;
  }

  #version-selector-mmodal .refresh-btn .material-symbols-rounded {
    margin-top: 3px;
  }

  #version-selector-mmodal .loading-overlay div.rounded-full {
    width: 90%;
  }
</style>

<script>
  var selectorWrappers = [
    "#version-category-selector",
    "#version-type-selector",
    "#vanilla-type-selector",
  ];
  selectorWrappers.forEach((wrapper) => {
    $(wrapper + " .inline-block").click((event) => {
      if (!$(event.currentTarget).hasClass("active")) {
        $(wrapper + " .inline-block.active").removeClass("active");
        $(event.currentTarget).addClass("active");
      }
      FrogVersionsUI.refreshVersionsWithFilters();
    });
  });

  $("#version-selector-mmodal #version-search-input").keyup((event) => {
    FrogVersionsUI.searchVersions($(event.currentTarget).val());
  });
</script>
